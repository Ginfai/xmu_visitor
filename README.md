# Insta360 虚拟旅游项目

## 项目背景

本项目是一个基于 **krpano** 技术的虚拟旅游系统，专门为 Insta360 全景相机拍摄的内容设计。项目旨在创建一个交互式的虚拟旅游体验，让用户能够通过网页浏览器浏览全景照片，并在不同场景之间进行无缝导航。

该项目特别针对室内外场景的虚拟旅游需求，集成了自定义地图系统，为用户提供直观的位置导航和场景切换功能。

## 现有功能

### 1. 全景图像展示
- **多场景支持**: 支持多个全景场景的无缝切换
- **高质量渲染**: 基于 krpano 引擎的高质量全景图像渲染
- **响应式设计**: 适配不同设备和屏幕尺寸

### 2. 自定义地图系统
- **平面地图集成**: 自定义的平面地图系统，显示当前位置
- **动态位置标记**: 实时更新用户在地图上的位置
- **响应式布局**: 根据屏幕尺寸自动调整地图大小和位置
- **地图切换功能**: 支持地图的展开/收起操作

### 3. 交互式导航
- **热点导航**: 场景间的热点链接，实现平滑过渡
- **缩略图导航**: 提供场景缩略图预览和快速切换
- **键盘控制**: 支持键盘快捷键操作
- **触摸支持**: 移动设备触摸手势支持


## 技术栈

### 核心技术
- **krpano 1.23.1**: 专业全景图像查看器引擎
- **XML 配置**: krpano 项目配置文件系统
- **JavaScript**: 交互逻辑和自定义功能实现
- **HTML5**: 现代化的网页结构

### 前端技术
- **CSS3**: 响应式样式和动画效果
- **JavaScript ES6+**: 现代 JavaScript 特性
- **WebGL**: 硬件加速的图形渲染
- **Canvas API**: 图像处理和绘制

### 插件和扩展
- **WebVR 插件**: 虚拟现实设备支持
- **陀螺仪插件**: 移动设备方向感应
- **地图插件**: Google Maps 和 Bing Maps 集成
- **音视频插件**: 多媒体内容支持

### 开发工具
- **krpano Tools**: 全景图像处理和优化
- **XML 编辑器**: 配置文件编辑
- **图像处理**: PNG/JPEG 格式支持
- **版本控制**: Git 项目管理

## 项目结构

```
insta360/
├── integration/
│   └── vtour/
│       ├── tour.xml              # 主配置文件
│       ├── tour.html             # 主页面文件
│       ├── tour.js               # krpano 核心库
│       ├── custom_map_system.xml # 自定义地图系统
│       ├── panos/                # 全景图像目录
│       ├── skin/                 # 界面皮肤资源
│       └── plugins/              # 插件目录
└── map_implementation_plan.md    # 地图系统实现计划
```

## 核心文件说明

### tour.xml
主配置文件，定义了：
- 场景信息和坐标
- 界面设置和皮肤配置
- 事件监听器
- 自定义地图系统集成

### custom_map_system.xml
自定义地图系统，包含：
- 响应式地图容器
- 动态位置标记
- 地图切换控制
- 坐标映射逻辑

### tour.html
主页面文件，提供：
- 基本的 HTML 结构
- krpano 嵌入配置
- 响应式样式
- 移动设备优化

## 特色功能

### 1. 智能地图系统
- 自动计算场景在地图上的位置
- 支持自定义地图图像
- 实时位置更新和标记
- 响应式布局适配

### 2. 无缝场景切换
- 平滑的过渡动画
- 预加载机制
- 深度链接支持
- 键盘和触摸控制

### 3. 多设备兼容
- 桌面浏览器支持
- 移动设备优化
- 平板电脑适配
- VR 设备兼容

## 使用说明

### 基本使用
1. 将全景图像放置在 `panos/` 目录下
2. 在 `tour.xml` 中配置场景信息
3. 设置地图坐标和标记位置
4. 在浏览器中打开 `tour.html`

### 自定义配置
1. 修改 `custom_map_system.xml` 调整地图样式
2. 更新 `tour.xml` 中的场景配置
3. 替换 `skin/` 目录下的界面资源
4. 根据需要启用/禁用特定插件

## 技术特点

- **高性能**: 基于 WebGL 的硬件加速渲染
- **跨平台**: 支持主流浏览器和移动设备
- **可扩展**: 模块化的插件系统
- **易维护**: 清晰的代码结构和文档

## 开发环境

- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 支持 WebGL 的显卡
- 本地服务器环境（推荐）

## 许可证

本项目基于 krpano 许可证使用，具体许可条款请参考 krpano 官方文档。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进项目。

## 联系方式

如有问题或建议，请通过项目仓库联系。